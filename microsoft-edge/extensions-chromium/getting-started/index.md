---
description: 了解 Chromium 扩展以及构建扩展的核心概念。
title: Microsoft Edge (Chromium) Extensions 概念和体系结构
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 01/07/2021
ms.topic: conceptual
ms.prod: microsoft-edge
keywords: edge-chromium， Web 开发， html， css， javascript， 开发人员， 扩展
ms.openlocfilehash: 05732287bc1a782ed5830d5e7028cf5580f3b605
ms.sourcegitcommit: 6cf12643e9959873f8b5d785fd6158eeab74f424
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/06/2021
ms.locfileid: "11397922"
---
# <a name="extension-concepts-and-architecture"></a><span data-ttu-id="3e40d-104">扩展概念和体系结构</span><span class="sxs-lookup"><span data-stu-id="3e40d-104">Extension concepts and architecture</span></span>  

<span data-ttu-id="3e40d-105">本文简要介绍了帮助您构建扩展的概念。</span><span class="sxs-lookup"><span data-stu-id="3e40d-105">This article provides a brief introduction to concepts that help you build an extension.</span></span>  <span data-ttu-id="3e40d-106">若要了解 Microsoft Edge \ (Chromium\) 扩展，请继续了解多选项卡浏览器如何工作。</span><span class="sxs-lookup"><span data-stu-id="3e40d-106">To understand Microsoft Edge \(Chromium\) extensions, follow along to understand how multi-tab browsers work.</span></span>  

## <a name="understand-how-browsers-work"></a><span data-ttu-id="3e40d-107">了解浏览器如何工作</span><span class="sxs-lookup"><span data-stu-id="3e40d-107">Understand how browsers work</span></span>  

<span data-ttu-id="3e40d-108">下面的列表概述了在构建扩展之前要了解的有用信息。</span><span class="sxs-lookup"><span data-stu-id="3e40d-108">The following list outlines helpful information to understand before building your extension.</span></span>  

1.  <span data-ttu-id="3e40d-109">每个浏览器选项卡彼此独立。 每个选项卡在独立于其他浏览器选项卡和线程的单独线程中运行。</span><span class="sxs-lookup"><span data-stu-id="3e40d-109">Each browser tab is isolated from every other tab.  Each tab runs in a separate thread that is isolated from other browser tabs and threads.</span></span>  
    
    :::image type="complex" source="./media/index-image1-browsertabs.png" alt-text="每个浏览器选项卡一个线程" lightbox="./media/index-image1-browsertabs.png":::
       <span data-ttu-id="3e40d-111">每个浏览器选项卡一个线程</span><span class="sxs-lookup"><span data-stu-id="3e40d-111">One thread per browser tab</span></span>  
    :::image-end:::  
    
1.  <span data-ttu-id="3e40d-112">每个选项卡处理一个 GET 请求。</span><span class="sxs-lookup"><span data-stu-id="3e40d-112">Each tab handles one GET request.</span></span>  <span data-ttu-id="3e40d-113">每个选项卡使用一个 URL 获取一个数据流，这通常是 HTML 文档。</span><span class="sxs-lookup"><span data-stu-id="3e40d-113">Each tab uses a URL to get a single stream of data, which is normally an HTML document.</span></span>  <span data-ttu-id="3e40d-114">该单个流或页面包括 JavaScript 等说明，包括标记、图像引用、CSS 引用等。</span><span class="sxs-lookup"><span data-stu-id="3e40d-114">That single stream or page, includes instructions like JavaScript include tags, image references, CSS references, and more.</span></span>  <span data-ttu-id="3e40d-115">所有资源都下载到该选项卡页，然后页面呈现在选项卡中。</span><span class="sxs-lookup"><span data-stu-id="3e40d-115">All resources are downloaded to that one tab page, and then the page is rendered in the tab.</span></span>  
1.  <span data-ttu-id="3e40d-116">在每个选项卡和远程服务器之间通信。</span><span class="sxs-lookup"><span data-stu-id="3e40d-116">Communication occurs between each tab and a remote server.</span></span>  <span data-ttu-id="3e40d-117">每个选项卡在隔离环境中运行。</span><span class="sxs-lookup"><span data-stu-id="3e40d-117">Each tab runs in an isolated environment.</span></span>  <span data-ttu-id="3e40d-118">每个选项卡仍连接到 Internet，但每个选项卡都与其他选项卡隔离。</span><span class="sxs-lookup"><span data-stu-id="3e40d-118">Each tab is still connected to the internet, but each is isolated from other tabs.</span></span>  <span data-ttu-id="3e40d-119">选项卡可以运行 JavaScript 与服务器通信。</span><span class="sxs-lookup"><span data-stu-id="3e40d-119">A tab may run JavaScript to communicate with a server.</span></span>  <span data-ttu-id="3e40d-120">服务器是输入到选项卡的 URL 栏中的第一个 GET 请求的原始服务器。</span><span class="sxs-lookup"><span data-stu-id="3e40d-120">The server is the originating server for the first GET request that was entered into the URL bar of the tab.</span></span>  
1.  <span data-ttu-id="3e40d-121">扩展模型使用不同的通信模型。</span><span class="sxs-lookup"><span data-stu-id="3e40d-121">The extension model uses a different communication model.</span></span>  <span data-ttu-id="3e40d-122">与选项卡页类似，扩展在独立于其他选项卡页线程的单个线程中运行。</span><span class="sxs-lookup"><span data-stu-id="3e40d-122">Similar to a tab page, an extension runs in an individual thread that is isolated from other tab page threads.</span></span>  <span data-ttu-id="3e40d-123">选项卡将单个 GET 请求发送到远程服务器，然后呈现页面。</span><span class="sxs-lookup"><span data-stu-id="3e40d-123">A tab sends single GET requests to remote servers, and then renders the page.</span></span>  <span data-ttu-id="3e40d-124">但是，扩展的工作方式类似于远程服务器。</span><span class="sxs-lookup"><span data-stu-id="3e40d-124">However, an extension works similar to a remote server.</span></span>  <span data-ttu-id="3e40d-125">在浏览器中安装扩展在浏览器中创建独立 Web 服务器。</span><span class="sxs-lookup"><span data-stu-id="3e40d-125">Installing an extension in a browser creates a standalone web server in the browser.</span></span>  <span data-ttu-id="3e40d-126">扩展名独立于所有选项卡页。</span><span class="sxs-lookup"><span data-stu-id="3e40d-126">The extension is isolated from all tab pages.</span></span>  
    
    :::image type="complex" source="./media/index-image3-upsidedown.png" alt-text="扩展使用不同的通信模型" lightbox="./media/index-image3-upsidedown.png":::
       <span data-ttu-id="3e40d-128">扩展使用不同的通信模型</span><span class="sxs-lookup"><span data-stu-id="3e40d-128">Extensions use a different communication model</span></span>  
    :::image-end:::  
    
## <a name="extension-architecture"></a><span data-ttu-id="3e40d-129">扩展体系结构</span><span class="sxs-lookup"><span data-stu-id="3e40d-129">Extension architecture</span></span>  

<span data-ttu-id="3e40d-130">下面的列表概述了与扩展体系结构相关的有用信息。</span><span class="sxs-lookup"><span data-stu-id="3e40d-130">The following list outlines helpful information as it relates to the architecture of an extension.</span></span>  

1.  <span data-ttu-id="3e40d-131">扩展 Web 服务器捆绑包。</span><span class="sxs-lookup"><span data-stu-id="3e40d-131">The Extension web server bundle.</span></span>  <span data-ttu-id="3e40d-132">扩展是 Web 资源的捆绑包。</span><span class="sxs-lookup"><span data-stu-id="3e40d-132">An extension is a bundle of web resources.</span></span>  <span data-ttu-id="3e40d-133">Web 资源类似于你 \ (开发人员\) Web 服务器的其他资源。</span><span class="sxs-lookup"><span data-stu-id="3e40d-133">The web resources are similar to other resources that you \(the web developer\) publish to web servers.</span></span>  <span data-ttu-id="3e40d-134">生成扩展时，将 Web 资源捆绑到 zip 文件中。</span><span class="sxs-lookup"><span data-stu-id="3e40d-134">You bundle the web resources into a zip file when building an extension.</span></span>  
    
    <span data-ttu-id="3e40d-135">zip 文件包括 HTML、CSS、JavaScript 和图像文件。</span><span class="sxs-lookup"><span data-stu-id="3e40d-135">The zip file includes HTML, CSS, JavaScript, and image files.</span></span>  <span data-ttu-id="3e40d-136">zip 文件的根中需要另外一个文件。</span><span class="sxs-lookup"><span data-stu-id="3e40d-136">One more file is required in the root of the zip file.</span></span>  <span data-ttu-id="3e40d-137">另一个文件是名为 的清单文件 `manifest.json` 。</span><span class="sxs-lookup"><span data-stu-id="3e40d-137">The other file is the manifest file that is named `manifest.json`.</span></span>  <span data-ttu-id="3e40d-138">清单文件是扩展的蓝图，包括扩展版本、标题、运行扩展所需的权限等。</span><span class="sxs-lookup"><span data-stu-id="3e40d-138">The manifest file is the blueprint of your extension and includes the version of your extension, the title, permissions needed for the extension to run, and so on.</span></span>  
    
1.  <span data-ttu-id="3e40d-139">启动扩展服务器。</span><span class="sxs-lookup"><span data-stu-id="3e40d-139">Launching the extension server.</span></span>  <span data-ttu-id="3e40d-140">Web 服务器包含 Web 捆绑包。</span><span class="sxs-lookup"><span data-stu-id="3e40d-140">Web servers contain your web bundle.</span></span>  <span data-ttu-id="3e40d-141">浏览器导航到服务器上 URL，并下载文件以在浏览器中呈现。</span><span class="sxs-lookup"><span data-stu-id="3e40d-141">A browser navigates to URLs on the server, and downloads the file to render in the browser.</span></span>  <span data-ttu-id="3e40d-142">浏览器使用证书、配置文件等进行导航。</span><span class="sxs-lookup"><span data-stu-id="3e40d-142">A browser navigates using certificates, configuration files, and so on.</span></span>  <span data-ttu-id="3e40d-143">如果 `index.html` 指定了文件，则该文件存储在 Web 服务器上的特殊位置。</span><span class="sxs-lookup"><span data-stu-id="3e40d-143">If an `index.html` file is specified, the file is stored at a special location on the web server.</span></span>  
    
    <span data-ttu-id="3e40d-144">使用扩展时，浏览器的选项卡页将使用扩展运行时访问扩展的 Web 捆绑包。</span><span class="sxs-lookup"><span data-stu-id="3e40d-144">When you use an extension, the tab page of your browser gets to the web bundle of your extension using the extension runtime.</span></span>  <span data-ttu-id="3e40d-145">扩展运行时提供 URL 中的文件，其中 是安装期间分配给扩展 `extension://{some-long-unique-identifier}/index.html` `{some-long-unique-identifier}` 的唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="3e40d-145">The extension runtime serves the files from the URL `extension://{some-long-unique-identifier}/index.html`, where `{some-long-unique-identifier}` is a unique identifier assigned to the extension when during installation.</span></span>  <span data-ttu-id="3e40d-146">每个扩展使用不同的唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="3e40d-146">Each extension uses a different unique identifier.</span></span>  <span data-ttu-id="3e40d-147">每个标识符指向安装在浏览器中的 Web 捆绑包。</span><span class="sxs-lookup"><span data-stu-id="3e40d-147">Each identifier points to the web bundle that is installed in your browser.</span></span>  
    
1.  <span data-ttu-id="3e40d-148">扩展可能会与选项卡和浏览器工具栏通信。</span><span class="sxs-lookup"><span data-stu-id="3e40d-148">An extension may communicate with tabs and the browser toolbar.</span></span>  <span data-ttu-id="3e40d-149">扩展可能会与浏览器的工具栏交互。</span><span class="sxs-lookup"><span data-stu-id="3e40d-149">An extension may interact with the toolbar of your browser.</span></span>  <span data-ttu-id="3e40d-150">每个扩展在单独的线程中管理正在运行的选项卡页，并且每个选项卡页上的 DOM 操作是独立的。</span><span class="sxs-lookup"><span data-stu-id="3e40d-150">Each extension manages running tab pages in separate threads, and DOM manipulation on each tab page is isolated.</span></span>  <span data-ttu-id="3e40d-151">扩展使用扩展 API 在扩展和选项卡页之间进行通信。</span><span class="sxs-lookup"><span data-stu-id="3e40d-151">An extension uses the extensions API to communicate between the extension and tab pages.</span></span>  <span data-ttu-id="3e40d-152">扩展 API 提供额外功能，包括通知管理、存储管理等。</span><span class="sxs-lookup"><span data-stu-id="3e40d-152">The extensions API provides extra capabilities that include notification management, storage management, and so on.</span></span>  
    
    <span data-ttu-id="3e40d-153">与 Web 服务器一样，扩展在浏览器打开时等待通知。</span><span class="sxs-lookup"><span data-stu-id="3e40d-153">Just like web servers, an extension waits for notifications when the browser is open.</span></span>  <span data-ttu-id="3e40d-154">扩展页和选项卡页在相互隔离的线程中运行。</span><span class="sxs-lookup"><span data-stu-id="3e40d-154">An extension and tab pages run in threads that are isolated from each other.</span></span>  <span data-ttu-id="3e40d-155">若要允许扩展在任何选项卡页中运行，请使用扩展 API 并设置清单文件中的权限。</span><span class="sxs-lookup"><span data-stu-id="3e40d-155">To allow an extension to work with any tab page, use the extensions API and set the permissions in the manifest file.</span></span>  
    
1.  <span data-ttu-id="3e40d-156">扩展在安装时提供选择加入权限。</span><span class="sxs-lookup"><span data-stu-id="3e40d-156">An extension provides opt-in permissions at install time.</span></span>  <span data-ttu-id="3e40d-157">您可以在文件中指定扩展 `manifest.json` 权限。</span><span class="sxs-lookup"><span data-stu-id="3e40d-157">You specify the extension permissions in the `manifest.json` file.</span></span>  <span data-ttu-id="3e40d-158">当用户安装扩展时，将显示有关扩展需要的权限的信息。</span><span class="sxs-lookup"><span data-stu-id="3e40d-158">When a user installs an extension, information about the permissions that the extension requires is displayed.</span></span>  <span data-ttu-id="3e40d-159">根据所需的权限类型，扩展可能会从浏览器中提取和使用信息。</span><span class="sxs-lookup"><span data-stu-id="3e40d-159">Based on the type of permission required, the extension may extract and use information from the browser.</span></span>  
    
## <a name="next-steps"></a><span data-ttu-id="3e40d-160">后续步骤</span><span class="sxs-lookup"><span data-stu-id="3e40d-160">Next steps</span></span>  

<span data-ttu-id="3e40d-161">有关扩展入门的信息，请导航到 [创建扩展教程][CreateAnExtensionPart1]。</span><span class="sxs-lookup"><span data-stu-id="3e40d-161">For information on getting started with your extension, navigate to [Create an extension tutorial][CreateAnExtensionPart1].</span></span>  

<!-- links -->  

[CreateAnExtensionPart1]: ./part1-simple-extension.md "创建扩展教程 - 第 1 部分|Microsoft Docs"  
