---
description: 使用调试程序逐句浏览代码并对代码进行故障排除。
title: 调试程序-DevTools （EdgeHTML）
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 07/16/2020
ms.topic: article
ms.prod: microsoft-edge
keywords: microsoft edge、web 开发、f12 工具、devtools、调试器、调试、断点、监视、服务工作人员、缓存 api、web 存储、cookie
ms.custom: seodec18
ms.openlocfilehash: 722277618cd8d6d5d6dba4f2a8bd3a28b6466f77
ms.sourcegitcommit: a06c86ef7c69e1e400a0be5938449f3c4ba6ec72
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/16/2020
ms.locfileid: "10882917"
---
# 调试程序-DevTools （EdgeHTML）

使用**调试程序**逐句通过代码、设置监视和断点、实时编辑代码和检查缓存。 通过以下方式测试和解决代码问题：

- [浏览](#resource-picker)和[搜索](#file-search)加载的源文件中的代码
- 逐句通过代码时[控制执行流程](#toolbar)
- [管理页面存储资源](./storage.md#cache-manager)，包括[服务工作人员和缓存](./service-workers.md)、 [cookie](./storage.md#cookies-list)和[web 存储](./storage.md#local-and-session-storage-managers)  
- 在运行时[设置断点和实时编辑](#debug-window)代码
- 调试时[跟踪和编辑本地变量](#watches)
- 根据需要从调用堆栈中[隐藏或显示异步代码和库代码](#call-stack)
- 为 XmlHttpRequests、事件和 DOM[添加专用断点](#breakpoints) [mutations](#dom-breakpoints)

![Microsoft Edge DevTools 调试器](./media/debugger.png)

可通过三种方式开始调试会话。

1. **设置断点。** 当代码执行到达时，你将进入调试器，并且能够逐句通过你的代码。
2. **在代码中启动中断。** 单击 "[**分隔符**](#toolbar)" （*暂停*图标）工具栏按钮或 `Ctrl+Shift+B` 。 调试器将在下一执行语句中断。
3. **设置异常行为。** 使用 "[**更改异常行为**](#toolbar)" 菜单（ `Ctrl+Shift+E` ）在代码引发异常时中断到调试器。 默认情况下，调试器设置为*永不中断异常*，但会将其记录到控制台。

## 资源选取器

通常，调试的第一步是在要进行疑难解答的代码中设置断点。 你可以从*资源选取器*窗格（包括 *.html、.css*和 *.js*文件）查找页面上当前加载的所有代码文件。

 单击某个文件条目将在[调试窗口](#debug-window)中打开该文件的一个选项卡，并将文件名的文本加粗，以指示这一点（如上面的插图中的*devtools*文件名）。 然后，可以从 "[调试" 窗口](#debug-window)在该文件中设置断点。

![调试器资源选取器](./media/debugger_resource_picker.png)

从*资源选取器*上下文菜单中，你还可以将文件标记为**库代码**（ `Ctrl+L` ），以便你可以选择在[调试器中跳过该代码](#debug-window)，并将[其从 "**调用堆栈**" 窗格中隐藏](#call-stack)。 再次单击（或 `Ctrl+L` ）会将文件作为*我的代码*或*库代码*切换回原来的值。

### 文件搜索

*Find in files* `Ctrl` + `Shift` + `F` 当你有要在源中查找的特定代码字符串时，请使用 "在文件中查找" 命令（）。 工具栏提供了不同的搜索选项，包括正则表达式。 单击搜索结果会将*调试窗口*重点放在指定的文件和行上。

![调试器文件搜索窗格](./media/debugger_file_search.png)

## 调试窗口

"*调试" 窗口*是设置断点、单步执行代码以及在调试时实时编辑脚本的位置。 单击任意脚本命令左侧的以添加（或删除）**断点**。 使用右键单击上下文菜单或 "[**断点**](#breakpoints)" 窗格向断点*添加条件*，方法是提供一个逻辑表达式，该表达式会导致调试程序在该位置计算*True*时中断。

![调试窗口命令](./media/debugger_window.png)

"调试" 窗口的其他功能包括用于以下内容的控件：

### 1. 代码编辑

你可以在调试会话期间编辑 JavaScript live。 进行更改后，单击 " <strong> 保存" </strong> （ `Ctrl+S` ）以在下次运行该代码段时测试所做的更改。 如果您有未保存的代码更改，则 "*调试窗口*" 选项卡中的文件名前面将显示星号（\ *）。

单击 "**将文档与原始文档比较**" 按钮以查看更改内容的差异。

![调试器中编辑代码的比较视图](./media/debugger_edit_code.png)

请注意以下限制：

- 脚本编辑仅适用于外部 *.js*文件（而不是嵌入 `<script>` 在 *.html*中）
- 编辑保存在内存中，并在重新加载文档时进行刷新，因此你无法在处理程序内运行编辑 `DOMContentLoaded` ，例如
- 目前没有办法（如 "**另存为**" 选项）将您的编辑内容从 DevTools 保存到磁盘。

### 2. 编码格式

在调试时使用这些控件设置 minified 代码的格式以获得更好的可读性：

#### 整齐打印（ `Ctrl+Shift+P` ） 
为每个 JavaScript 约定添加换行符和花括号对齐。 使用此选项使得更易读的压缩代码可能具有与原始源代码不同的函数、选择器和变量名称。 在这些情况下，"[*切换源地图*](#source-maps)" 选项可能可用。

#### 文字环绕（ `Alt+W` ）
调整代码以适合 "调试" 窗口的当前边距（不需要水平滚动）。

### 3. 代码范围

你可以通过 "**标记为库代码**" 按钮指示调试器忽略某些文件 `Ctrl+L` 。 默认情况下，"[**仅调试**](#toolbar)" 工具栏按钮处于打开状态，这意味着调试器将跳过任何标记为*库代码*的文件，并且它们不会显示在调试器[调用堆栈](#call-stack)中。 按下按钮（"**标记为我的代码**" `Ctrl+L` ）将删除此标志。

为了在调试会话期间保持对库的跟踪，可以编辑这些文件以维护默认列表，或为域或文件类型添加通配符：

```JavaScript
%APPDATA%\..\LocalLow\Microsoft\F12\header\MyCode.json and %APPDATA%\..\Local\Microsoft\F12\header\MyCode.json
```

#### 源地图

你将看到 "**切换源映射**" 按钮，该按钮可用于使用编译为 JAVASCRIPT 或 CSS 的语言编写的代码，并提供*源映射*（指向原始源的中间文件映射）。 此选项指示调试器显示用于调试的原始源（而不是在浏览器中*实际*运行的已编译文件）。

DevTools 将检查生成 JavaScript 文件的编译器是否包含带有地图文件名称的注释。 例如，如果编译器将*myfile.js*压缩为*myfile.min.js*，它也可能会生成映射文件， *myfile.min.js。映射*并在压缩的文件中包含注释，如下所示：

```JavaScript
//# sourceMappingURL=myfile.min.js.map
```

!["调试文件" 选项卡上下文菜单](./media/debug_file_contextmenu.png)

如果 DevTools 无法自动找到地图，则可以选择该文件的源映射。 右键单击文件的选项卡以查找 "**选择源映射**" 选项。 

## 工具栏

使用调试器*工具栏*控制逐句通过代码的方式，以及要单步执行或忽略的代码。 在此，你还可以在代码文件中对特定字符串执行全文搜索。

![调试器工具栏](./media/debugger_toolbar.png)

### 1. 继续（ `F5` ）/中断（ `Ctrl+Shift+B` ）
 **Continue** （ `F5` ）继续向下一个断点执行代码。 按住 `F5` 将重复移动过去的工间休息，直到您释放。 

 **Break** `Ctrl+Shift+B` 运行下一条语句后，中断（）将中断到调试器。

### 2. 步骤函数（ `F11` 、 `Ctrl+F10` 、 `Shift+F11` ）
 在正在调用的函数中**单步**执行（ `F11` ）步骤。 

 **逐步骤**（ `Ctrl+F10` ）对正在调用的函数执行操作。 

 **跳出（** `Shift+F11` ）从当前函数到调用函数的步骤。 

 如果使用这些命令时，调试器不在函数中，则调试器将单步执行到下一条语句。

### 3. 在新工作人员处中断（ `Ctrl+Shift+W` ）
 创建新的[web 工作人员](https://developer.mozilla.org/docs/Web/API/Web_Workers_API/Using_web_workers)时中断。

### 4. 异常控制
**更改异常行为**（ `Ctrl+Shift+E` ）打开选项以更改调试器对异常的反应方式。 默认情况下，调试器会忽略异常并将其记录到[**控制台**](./console.md)。 你可以选择*中断所有异常*，或者仅中断 `try...catch` 你的代码中的语句（*中断未经处理的异常*）处理的异常。

### 5. 查看搜索结果
（当前已禁用。）"**显示/隐藏结果**" 将切换 "[*在文件中查找*](#6-find-in-files-ctrlf)" 搜索结果的显示。

### 6. 在文件中查找（ `Ctrl+F` ）
 **在文件中查找**（ `Ctrl+F` ）在[*资源选取器*](#resource-picker)中的所有已加载文件中运行文本搜索。 如果找到文本，它将打开与搜索字符串匹配的第一个文件。 按 `Enter` `F3` 下或转到下一个匹配项。

### 7. 调试 "仅我的代码" （ `Ctrl+J` ）
 **调试 "仅我的代码"** （ `Ctrl+J` ）用作切换，以在逐句通过调试器时包含或排除已标记为[库代码](#3-code-scoping)的所有文件。

### 8. 调试程序连接
**断开连接/连接调试器**实质上是调试器的 "开/关" 开关。

## 项目

使用 "**监视**" 窗格浏览本地和全局范围中的所有对象和**变量（本地**）的目录，这些内容可供在调试器中作为当前中断的焦点的语句使用。

!["监视" 窗格](./media/debugger_watches.png)

你可以通过添加监视（添加监视）来跟踪特定变量的值，方法是添加监视（**添加监视**， `Ctrl+W` ）并通过双击*上下文菜单*中的 "**编辑值**" 来修改任何可编辑的值。 使用 "**删除**" （ `Ctrl+D` ）/"**全部删除**" 按钮或从上下文菜单中清除监视。 

## 详细信息

*详细信息*窗格包括 "[**调用堆栈**](#call-stack)"、"[**断点**](#breakpoints)" 和 " [**DOM 断点**](#dom-breakpoints)" 选项卡。

### 调用堆栈

"**调用堆栈**" 选项卡显示导致当前执行点的函数链。 当前函数显示在顶部，并且调用函数按相反顺序显示在其下方。

!["调用堆栈" 窗格](./media/debugger_callstack.png)

"**显示/隐藏库框架**" 按钮（ `Ctrl+Shift+J` ）用于切换来自调用堆栈的[库代码](#3-code-scoping)的输出。 使用右键单击上下文菜单中的**库代码**选项（ `Ctrl+L` ） *Context menu* ，将所选帧的来源标记为（或取消标记）为库代码。 

"**显示/隐藏异步帧**" 按钮用于切换异步函数调用的根的显示。

### 断点

从 "**断点**" 选项卡中，你可以管理断点和事件跟踪点，包括设置条件、禁用和删除它们。

![断点选项卡](./media/debugger_breakpoints.png)

下面是可用于调试的不同类型的断点的摘要。

断点类型 | 描述 | 如何设置它
:------------ | :------------ | :--------
**处** | 在执行指定的代码行之前，只需中断到调试器。 如果每行有一个语句，则可以最方便地设置常规断点。 | 从 "[调试" 窗口](#debug-window)中，单击代码中任何行号旁边的左边距。 将显示一个红点，并设置断点。 你可以通过单击其蓝色文本跳转到任何断点的源。
**条件断点** | 如果指定条件的计算结果为*true*，则断开。 这实际上是 `if(condition)` 用于中断调试器。  | 从 "[断点](#breakpoints)" 选项卡上，将鼠标悬停在现有断点上，然后单击 "铅笔" 按钮（*向此断点添加条件*），右键单击现有断点，然后从上下文菜单中选择 "**条件 ...** "。 在断点位置指定要计算的 "if" 条件。 
**XMLHttpRequest 断点**（w/可选条件） | 只要满足 XMLHttpRequest （XHR）请求，就会中断。 你可以 `response` 从 "[**监视**](#watches)" 窗格中检查 XHR 对象。 | 从 "[断点](#breakpoints)" 选项卡中，单击 " *XMLHttpRequest 断点*" 按钮（带有向上/向下箭头的圆圈）。 你可以按照上述说明将其转换为*条件断点*。
**事件跟踪点** | [`console.log()`](./console/console-api.md#logging-custom-messages)在响应特定事件时使用指定字符串的调用。 将此用于不希望直接保存在事件处理程序代码中的临时控制台日志记录语句。 | 从 "[断点](#breakpoints)" 选项卡中，单击 "*事件跟踪点*" 按钮（带有闪电形的菱形）。 选择触发器的**事件**类型和用于日志记录的**跟踪**语句。
**事件断点**（带可选条件） | 在引发指定事件时中断。 | 从 "[断点](#breakpoints)" 选项卡中，单击 "*事件断点*" 按钮（带有闪电形的圆圈）。 选择触发器的**事件**类型，还可以指定**条件**语句。 
**DOM 断点** | 只要页面上的指定元素发生改变，例如其子树被修改、其属性发生更改或从 DOM 分离时，就会中断。 | 从 "[元素](./elements/dom-breakpoints.md)" 选项卡中，右键单击源元素，然后从 " *DOM 断点*" 选项中进行选择。 使用 "*调试器*" 或 "*元素*" 面板中的 " [**DOM 断点**](#dom-breakpoints)" 选项卡来管理断点。 

条件断点和跟踪点在其中断到调试器时可以访问当前在范围内的所有局部变量和全局变量。

### DOM 断点

从 " **dom 断点**" 选项卡管理你的 dom 转变断点，包括禁用、删除和重新绑定它们。  可以从 "**元素**" 面板中的*HTML 树视图*[设置 DOM 断点](./elements/dom-breakpoints.md)。

![DOM 断点选项卡](./media/debugger_dom_breakpoints.png)

**调试器**中的 " *dom 断点*" 选项卡向 "**元素**" 面板上的 " *dom 断点*" 选项卡提供等效功能。

下面详细介绍了不同类型的[DOM 断点](./elements/dom-breakpoints.md)。

## 指向

### 工具栏快捷方式

操作 | 快捷方式
:------------ | :-------------
查找 | `Ctrl` + `F`
继续（从断点） | `F5` 或者 `F8`
快速继续 | 保留 `F5` 或 `F8`
继续并刷新 | `Ctrl` + `Shift` + `F5`
进入 | `Ctrl` + `Shift` + `B`
单步执行 | `F11`
跳过 | `F10`
跳出 | `Shift` + `F11`
新工作人员中断 | `Ctrl` + `Shift` + `W`
更改异常行为（"打开" 菜单） | `Ctrl` + `Shift` + `E`
调试 "仅我的代码" | `Ctrl` + `J`

### 资源选取器快捷方式

操作 | 快捷方式
:------------ | :-------------
标记为我的代码/库代码 | `Ctrl` + `L`
打开文件 | `Ctrl` + `O`, `Ctrl` + `P`
搜索所有文件 | `Ctrl` + `Shift` + `F`

### 调试窗口快捷方式

操作 | 快捷方式
:------------ | :-------------
删除断点 | `F9`
禁用断点 | `Ctrl` + `F9`
条件断点 .。。 | `Alt` + `F9`
复制 | `Ctrl` + `C`
保存 | `Ctrl` + `S`
转到行 .。。 | `Ctrl` + `G`
显示下一条语句 | `Alt` + `Num` + `*`
运行到光标 | `Ctrl` + `F10`
设置下一语句 | `Ctrl` + `Shift` + `F10`
在文件选取器中显示 | `Ctrl` + `Alt` + `P`
转到文件中的定义 | `Ctrl`+`D`
在文件中查找引用 | `Ctrl` + `Shift` + `D`
打印整齐 | `Ctrl` + `Shift` + `P`
文字环绕 | `Alt` + `W`
标记为我的代码/库代码 | `Ctrl` + `L`
在编辑器中禁用/启用选项卡。 **注意：** 如果你使用键盘在调试程序中导航，则无法通过 tab 键退出编辑器，直到禁用 tab 键切换 | `Ctrl` + `M`

### "监视" 窗格的快捷方式

操作 | 快捷方式
:------------ | :-------------
添加手表 | `Ctrl` + `W`
删除手表 | `Ctrl` + `D`

### "详细信息" 窗格的快捷方式

| 操作                             | 快捷方式                 |
|:-----------------------------------|:-------------------------|
| 显示/隐藏库代码中的框架 | `Ctrl` + `Shift` + `J`   |
| 启用所有断点             | `Ctrl` + `Shift` + `F11` |
